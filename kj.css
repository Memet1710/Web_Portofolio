/* ===== Theme ===== */
:root{
  --bg: #0d0f1a;
  --bg-2: #0b0d16;
  --primary: #00d4ff;
  --secondary: #ff007c;
  --text: #eaf2ff;
  --muted: #9ba0b8;
  --card-bg: #16182a;
  --ring: rgba(0,212,255,.25);

  /* Equal accordion height (computed via JS) */
  --acc-panel-height: 520px;
}

/* ===== Reset & Base ===== */
*{ box-sizing: border-box; margin:0; padding:0; }
html, body{ height:100%; }
body{
  font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background:
    radial-gradient(1200px 600px at 50% -10%, #11142a 0%, transparent 60%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);
  display:flex; flex-direction:column; min-height:100vh;
  overflow-x:hidden; position:relative;
}

/* ===== Transition Overlay ===== */
.pt-overlay{ position: fixed; inset:0; z-index: 9999; pointer-events: none; display:grid; place-items:center; opacity:1; }
.pt-grid{ position:absolute; inset:0; opacity:.25;
  background: repeating-linear-gradient(to bottom, rgba(0,212,255,.12) 0 1px, transparent 1px 28px),
              repeating-linear-gradient(to right,  rgba(0,212,255,.12) 0 1px, transparent 1px 28px);
  filter: drop-shadow(0 0 8px rgba(0,212,255,.15));
}
.pt-bars{ position:relative; width:100%; height:100%; }
.pt-bars span{ position:absolute; left:0; width:100%; height:6px; opacity:0; mix-blend-mode:screen;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,.8), transparent); }
.pt-bars span:nth-child(1){ top:35%; }
.pt-bars span:nth-child(2){ top:50%; height:10px; }
.pt-bars span:nth-child(3){ top:65%; }
.pt-enter{ background: radial-gradient(circle at 50% 50%, rgba(0,212,255,.25), rgba(0,0,0,.85)); }
.pt-enter-active{ animation: ptIrisOpen 650ms ease-out forwards, ptBars 650ms ease-out forwards; }
@keyframes ptIrisOpen{ 0%{clip-path:circle(150% at 50% 50%); opacity:1;} 100%{clip-path:circle(0% at 50% 50%); opacity:0;} }
@keyframes ptBars{ 0%{opacity:1;} 100%{opacity:0;} }
.pt-exit{ background: radial-gradient(circle at 50% 50%, rgba(0,0,0,.85), rgba(0,212,255,.25)); }
.pt-exit-active{ animation: ptIrisClose 600ms ease-in forwards; }
@keyframes ptIrisClose{ 0%{clip-path:circle(0% at 50% 50%); opacity:0;} 100%{clip-path:circle(150% at 50% 50%); opacity:1;} }
.pt-enter-active .pt-bars span,
.pt-exit-active .pt-bars span{ animation: ptGlitch 600ms ease-in-out forwards; }
@keyframes ptGlitch{ 0%{opacity:0; transform:translateX(-20%);} 20%{opacity:.7; transform:translateX(0);} 60%{opacity:.4; transform:translateX(15%);} 100%{opacity:0; transform:translateX(40%);} }

/* ===== Circuit background ===== */
#circuit{ position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: .75; mix-blend-mode: screen; }

/* ===== Header & Nav ===== */
.main-header{
  position:relative; z-index:1;
  text-align:center; padding: 2.2rem 1rem 1rem;
  border-bottom: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
}
.nav{ max-width: 1100px; margin: 0 auto 1rem; display:flex; align-items:center; justify-content:space-between; }
.brand{ text-decoration:none; color:#bfeaff; font-weight:600; padding:.4rem .7rem; border:1px solid rgba(255,255,255,.12); border-radius:999px; }
.nav-right a{ text-decoration:none; color:#dfe8ff; opacity:.85; margin-left:.8rem; padding:.35rem .65rem; border-radius:8px; }
.nav-right a.active, .nav-right a:hover{ background: rgba(255,255,255,.06); opacity:1; }
.main-header h1{ font-family: "Orbitron", sans-serif; letter-spacing: 3px; font-size: clamp(1.4rem, 2vw + 1rem, 2.2rem); }
.main-header h1 span{ color: var(--primary); }
.subtitle{ margin-top:.4rem; color: var(--muted); }

/* ===== Glitch title ===== */
.glitch{ position: relative; display: inline-block; text-shadow: 0 0 12px rgba(0,212,255,.25); }
.glitch::before, .glitch::after{ content: attr(data-text); position:absolute; left:0; top:0; width:100%; overflow:hidden; clip-path: inset(0 0 0 0); pointer-events:none; }
.glitch::before{ color:#00e5ff; transform: translate(2px,0); mix-blend-mode: screen; animation: glitchShift 2.1s infinite linear alternate-reverse; }
.glitch::after{ color:#ff2aa1; transform: translate(-2px,0); mix-blend-mode: screen; animation: glitchSlice 2s infinite linear alternate; }
@keyframes glitchShift{ 0%{clip-path: inset(0 0 87% 0);} 10%{clip-path: inset(0 0 0 0); transform: translate(2px,-1px);} 40%{clip-path: inset(10% 0 70% 0);} 70%{clip-path: inset(0 0 0 0); transform: translate(0,-1px);} 100%{clip-path: inset(0 0 82% 0);} }
@keyframes glitchSlice{ 0%{clip-path: inset(0 0 0 0);} 45%{clip-path: inset(0 0 72% 0);} 75%{clip-path: inset(35% 0 0 0);} 100%{clip-path: inset(0 0 0 0);} }

/* ===== Main layout ===== */
#content{ flex:1; display:flex; flex-direction:column; position:relative; z-index:1; }
.intro{
  max-width:1000px; margin:1.4rem auto 1.2rem; padding:1rem 1.2rem;
  background: rgba(7,12,22,.55); border:1px solid rgba(255,255,255,.06);
  border-radius:14px; text-align:center; line-height:1.6; box-shadow:0 10px 24px rgba(0,0,0,.35);
}
.intro strong{ color: var(--primary); }
.topology{ margin-top:.8rem; display:flex; flex-wrap:wrap; gap:.6rem; justify-content:center; }
.topology .node{ font-size:.85rem; padding:.45rem .75rem; border-radius:999px; background:rgba(0,212,255,.08); border:1px solid rgba(0,212,255,.22); color:#bfeaff; }

/* ===== Accordion ===== */
.accordion{ max-width:1000px; margin:.6rem auto 2rem; padding:0 1rem; }
.acc-item{
  background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06);
  border-radius:14px; margin-bottom:.9rem; overflow:hidden;
  box-shadow:0 10px 22px rgba(0,0,0,.35);
}

/* equal header height + focus ring */
.acc-head{
  width:100%; text-align:left; padding:1rem 1.1rem; background:transparent; border:0; color:#dfe8ff;
  font-weight:600; display:flex; align-items:center; justify-content:space-between; cursor:pointer;
  min-height:60px;
}
.acc-head:focus-visible{
  outline: 2px solid var(--primary);
  outline-offset: 2px;
  border-radius: 10px;
}
.acc-head .chev{ opacity:.7; transition: transform .25s ease; }
.acc-item.open .acc-head .chev{ transform: rotate(180deg); }

/* smooth panel animation using max-height + opacity */
.acc-body{
  padding: 0 1.1rem; /* internal padding without affecting max-height calc */
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height .55s cubic-bezier(.2,.6,.2,1), opacity .35s ease;
}
.acc-item.open .acc-body{
  max-height: var(--acc-panel-height);
  opacity: 1;
  padding-top: .2rem;
  padding-bottom: 1rem;
}

/* content inside panel */
.step{ margin-top: .9rem; }
.step h4{ color:#cfeaff; margin-bottom:.35rem; }
.check{ padding-left:1rem; }
.check li{ margin:.25rem 0; color:var(--muted); }

/* code block + copy */
.code{
  position:relative; margin-top:.5rem; background:#0a0e18; border:1px solid rgba(255,255,255,.08);
  border-radius:12px; overflow:auto; box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
}
.code pre{ margin:0; padding:.9rem 1rem; color:#d4e9ff; font-family:"Fira Mono", ui-monospace, Menlo, Consolas, monospace; font-size:.9rem; }
.code .copy{
  position:absolute; top:.5rem; right:.5rem; padding:.35rem .7rem; font-size:.8rem; border:0; border-radius:8px;
  background: rgba(0,212,255,.18); color:#001018; font-weight:700; cursor:pointer;
}
.note{ color:#9ee6b6; font-size:.9rem; margin-top:.45rem; }

/* visually-hidden helper for headings */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* ===== Footer ===== */
footer{
  margin-top:auto; text-align:center; padding:1rem; color:var(--muted);
  background:#090a12; font-size:.85rem; border-top:1px solid rgba(255,255,255,.06);
}

/* ===== Responsive ===== */
@media (max-width: 680px){
  .nav{ flex-direction:column; gap:.5rem; }
  .nav-right{ display:flex; }
  .code pre{ font-size:.85rem; }
}
